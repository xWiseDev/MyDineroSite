---
interface Props {
  variant?: 'primary' | 'secondary' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
  href?: string;
  type?: 'button' | 'submit' | 'reset';
  fullWidth?: boolean;
  class?: string;
}

const {
  variant = 'primary',
  size = 'md',
  href,
  type = 'button',
  fullWidth = false,
  class: className = ''
} = Astro.props;

const Tag = href ? 'a' : 'button';
const isExternal = href?.startsWith('http');
---

<Tag
  class:list={['btn', `btn-${variant}`, `btn-${size}`, { 'btn-full': fullWidth }, className]}
  href={href}
  type={!href ? type : undefined}
  target={isExternal ? '_blank' : undefined}
  rel={isExternal ? 'noopener noreferrer' : undefined}
>
  <slot />
</Tag>

<style>
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    font-family: inherit;
    font-weight: 600;
    text-decoration: none;
    border: none;
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition:
      background-color var(--transition-fast),
      transform var(--transition-fast),
      box-shadow var(--transition-fast);
  }

  .btn:focus-visible {
    outline: 2px solid var(--color-green-500);
    outline-offset: 2px;
  }

  /* Sizes */
  .btn-sm {
    height: 36px;
    padding-inline: var(--space-4);
    font-size: var(--font-size-sm);
  }

  .btn-md {
    height: 44px;
    padding-inline: var(--space-6);
    font-size: var(--font-size-base);
  }

  .btn-lg {
    height: 52px;
    padding-inline: var(--space-8);
    font-size: var(--font-size-lg);
  }

  /* Variants */
  .btn-primary {
    background: var(--gradient-green);
    color: var(--color-black);
    box-shadow: 0 0 20px rgba(52, 199, 89, 0.3);
  }

  .btn-primary:hover {
    transform: scale(1.02);
    box-shadow: 0 0 30px rgba(52, 199, 89, 0.5);
  }

  .btn-primary:active {
    transform: scale(0.98);
  }

  .btn-secondary {
    background-color: var(--color-gray-800);
    color: var(--color-white);
    border: 1px solid var(--color-white-10);
  }

  .btn-secondary:hover {
    background-color: var(--color-gray-700);
    border-color: var(--color-white-30);
  }

  .btn-ghost {
    background-color: transparent;
    color: var(--color-white);
  }

  .btn-ghost:hover {
    background-color: var(--color-white-10);
  }

  /* Full Width */
  .btn-full {
    width: 100%;
  }
</style>
