---
import { footerLinks } from '@/data/navigation';
import Logo from '@/components/ui/Logo.astro';

const currentYear = new Date().getFullYear();

// Helper to prefix internal paths with BASE_URL
const getHref = (href: string) => {
  if (href.startsWith('/')) return `${import.meta.env.BASE_URL}${href.slice(1)}`;
  if (href.startsWith('#')) return href;
  return href;
};
---

<footer class="footer">
  <div class="container footer-container">
    <div class="footer-grid">
      <div class="footer-brand">
        <a href={import.meta.env.BASE_URL} class="footer-logo">
          <Logo />
        </a>
        <p class="footer-tagline">Simple expense tracking. No bank sync.</p>
        <p class="footer-made">Made for people who value their privacy.</p>
      </div>

      <div class="footer-links-group">
        <h4 class="footer-heading">Product</h4>
        <ul class="footer-list">
          {footerLinks.product.map(link => (
            <li>
              <a href={getHref(link.href)} class="footer-link">{link.label}</a>
            </li>
          ))}
        </ul>
      </div>

      <div class="footer-links-group">
        <h4 class="footer-heading">Support</h4>
        <ul class="footer-list">
          {footerLinks.support.map(link => (
            <li>
              <a href={getHref(link.href)} class="footer-link">{link.label}</a>
            </li>
          ))}
        </ul>
      </div>

      <div class="footer-links-group">
        <h4 class="footer-heading">Legal</h4>
        <ul class="footer-list">
          {footerLinks.legal.map(link => (
            <li>
              <a href={getHref(link.href)} class="footer-link">{link.label}</a>
            </li>
          ))}
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      <p class="footer-copyright">
        &copy; {currentYear} MyDinero. All rights reserved.
      </p>
    </div>
  </div>
</footer>

<style>
  .footer {
    position: relative;
    background: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.02) 0%,
      var(--color-gray-900) 15%,
      var(--color-gray-900) 100%
    );
    padding-block: var(--space-16) var(--space-8);
  }

  /* Gradient top border */
  .footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.15) 20%,
      rgba(255, 255, 255, 0.2) 50%,
      rgba(255, 255, 255, 0.15) 80%,
      transparent 100%
    );
  }

  /* Soft inner glow */
  .footer::after {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 120px;
    background: radial-gradient(
      ellipse at top,
      rgba(255, 255, 255, 0.03) 0%,
      transparent 70%
    );
    pointer-events: none;
  }

  .footer-container {
    position: relative;
    z-index: 1;
  }

  .footer-grid {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: var(--space-12);
    margin-bottom: var(--space-12);
  }

  .footer-brand {
    max-width: 280px;
  }

  .footer-logo {
    display: inline-flex;
    align-items: center;
    margin-bottom: var(--space-4);
  }

  .footer-tagline {
    color: var(--color-white-70);
    margin-bottom: var(--space-4);
    font-size: var(--font-size-sm);
  }

  .footer-made {
    color: var(--color-white-50);
    font-size: var(--font-size-sm);
  }

  .heart {
    display: inline-block;
  }

  .footer-heading {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--color-white);
    margin-bottom: var(--space-4);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .footer-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .footer-link {
    color: var(--color-white-50);
    font-size: var(--font-size-sm);
    transition: color var(--transition-fast);
  }

  .footer-link:hover {
    color: var(--color-white);
  }

  .footer-bottom {
    position: relative;
    padding-top: var(--space-8);
  }

  .footer-bottom::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.08) 30%,
      rgba(255, 255, 255, 0.08) 70%,
      transparent 100%
    );
  }

  .footer-copyright {
    color: var(--color-white-50);
    font-size: var(--font-size-sm);
    text-align: center;
  }

  @media (max-width: 768px) {
    .footer-grid {
      grid-template-columns: 1fr 1fr;
      gap: var(--space-8);
    }

    .footer-brand {
      grid-column: 1 / -1;
      max-width: none;
      text-align: center;
      margin-bottom: var(--space-4);
    }

    .footer-logo {
      justify-content: center;
    }
  }

  @media (max-width: 480px) {
    .footer-grid {
      grid-template-columns: 1fr;
      text-align: center;
    }

    .footer-links-group {
      padding-block: var(--space-4);
    }
  }
</style>
